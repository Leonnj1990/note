# 2.从命令行管理文件

---

## Linux 文件系统层次结构

* 文件系统层次结构

### 文件系统层次结构

`Linux`系统中的**所有文件存储在文件系统中**，它们被组织到一个颠倒的目录树中，称为文件系统层次结构。**这棵树是颠倒的，因为树根在该层次结构的顶部，树根的下方延伸出目录和子目录的分支**。

`/`目录是根目录，位于文件系统层次结构的顶部。`/`字符还用作文件名中的目录分隔符。

#### 术语：

* **静态**，保持不变的内容，除非以显式方式编辑或重新配置
* **动态或可变**，通常有活动进程修改或附件的内容
* **永久**，在重启后依然保留的内容，尤其是配置设置
* **运行时**，重启期间清除的进程或相同特定内容或属性

#### 重要的目录

* `/usr`：安装的软件、共享的库，包含文件和静态只读程序数据，重要的子目录有：
	* `/usr/bin`：用户命令
	* `/usr/sbin`：系统管理命令
	* `/usr/local`：本地自定义软件
* `/etc`：特定于此系统的配置文件
* `/var`：特定于此系统的可变数据，在系统启动之间保持永久性。动态变化的文件如：
	* 数据库
	* 缓存目录
	* 日志文件
	* 打印机后台处理文档
	* 网站内容 
* `/run`：自上一次系统启动以来启动的进程的运行时数据。此目录中的内容在重启是重新创建
* `/home`：普通用户存储其个人数据和配置文件的主目录
* `/root`：管理超级用户`root`的主目录
* `/tmp`：供临时文件使用的全局可写空间。10天内未访问、更改或修改的文件从该目录中删除
	* 另一个临时目录`/var/tmp`：该目录中的文件如果在30天未访问、更改或修改过，将被自动删除
* `/boot`：开始启动过程所需的文件
* `/dev`：包含特殊的设备文件，供系统用于访问硬件

## 根据名称查找文件

* 绝对路径和相对路径
* 导航路径

### 绝对路径和相对路径

文件或目录的路径指定其唯一的文件系统位置

#### 绝对路径

完全限定名称，**自根目录`/`开始**，指定到达且唯一代表单个文件所遍历的每个子目录。文件系统中的每个文件都有一个唯一绝对路径名

#### 相对路径

仅指定**从工作目录**到达该文件所需的路劲。

### 导航路径

* `pwd`命令显示当前位置的完整路径名
* `ls`命令列出指定目录的目录内容。具有多个选项：
	* `-l`：长列表格式
	* `-a`：包含隐藏文件在内的所有文件
	* `-R`：递归方式，包含所有子目录的内容
* `cd`命令可更改目录。具有多个选项：
	* `-`：进入当前目录之前所处的目录
	* `~`：进入当前用户主目录
	* `.`：当前目录
	* `..`：父目录
* `touch`命令可将文件的时间戳更新为当前的日期和时间，而不做其他修改。可用于创建空文件

## 使用命令行工具管理文件

* 命令行文件管理

### 命令行文件管理

文件管理涉及创建、删除、复制、移动文件和目录

#### 文件管理命令

* 复制文件
	* 单一来源：`cp file1 file2` 
	* 多来源：`cp file1 file2 file3 dir`（**dir**最后一个参数必须是目录）
* 移动文件
	* 单一来源：`mv file1 file2`（实际结果为重命名） 
	* 多来源：`mv file1 file2 file3 dir`
* 删除文件
	* 单一来源：`rm file1` 
	* 多来源：`rm -f file1 file2 file3`（`-f`为强制操作）
* 创建目录
	* 单一来源：`mkdir dir`
	* 多来源：`mkdir -p par1/par2/dir`（`-p`为创建父级）
* 复制目录
	* 单一来源：`cp -r dir1 dir2`（`-r`为递归操作）
	* 多来源：`cp -r dir1 dir2 dir3 dir4`
* 移动目录
	* 单一来源：`mv dir1 dir2`
	* 多来源：`mv dir1 dir2 dir3 dir4`
* 删除目录
	* 单一来源：`rm -r dir1`
	* 多来源：`rm -rf dir1 dir2 dir3`

## 使用路径名扩展匹配文件名

* 文件通配：路径名扩展

### 文件通配：路径名扩展

`Bash shell`具有一个路径名匹配，以前叫匹配。`Bash`通配功能通常称为**模式匹配**或“**通配符**”。

#### 模式匹配

* 简单模式匹配项
	* `*`：由 0 个或以上字符组成的任何字符串
	* `?`：任何一个字符
* 波形符（`~`）扩展
	* `~`：当前用户的主目录
	* `~username`：username 用户的主目录
	* `~+`：当前工作目录
	* `~-`：上一工作目录
* 大括号（`{}`）扩展：用于生成任意字符串。包含字符串的逗号分隔列表或顺序表达式。大括号扩展可以互相嵌套。
* 命令替换：允许命令的输出替换命令本身
	* \`command`：反引号（旧形式）
	* `$(command)`：可以互相嵌套多个命令扩展
* 防止参数被扩展
	* 反斜杠（`\`）是`Bash`中的一个转义字符，防止气候的一个字符被特殊解释  
	* 双引号（`"`）可以阻止通配和`shell`扩展，允许命令和变量替换
	* 单引号（`'`）可以按字面解释所有的文本